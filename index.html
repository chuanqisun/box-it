<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Fulfillment Center Tycoon</title>
  </head>
  <body>
    <div id="ui-layer">
      <div class="label">Current Funds</div>
      <div id="score-display">$<span id="score">600</span></div>
      <div class="label">Time Left</div>
      <div id="timer-display"><span id="timeLeft">60</span>s</div>
      <div class="stat-row">
        <span>Box Cost:</span>
        <span class="cost">-$200</span>
      </div>
      <div class="stat-row">
        <span>Item Value:</span>
        <span class="value">+$100</span>
      </div>
    </div>
    <div id="settings-button-container">
      <button id="settings-button" class="gear-button" commandfor="settingsMenu" command="show-modal" aria-label="Open settings">âš™ï¸</button>
    </div>
    <canvas id="gameCanvas"></canvas>
    <dialog id="startMenu" class="settings-dialog">
      <div class="dialog-header">
        <h2>Box It!</h2>
      </div>
      <div class="dialog-body">
        <p>Ready to start your shift at the fulfillment center?</p>
        <fieldset class="theme-selection-section">
          <legend>Select a Theme</legend>
          <div class="theme-options" role="radiogroup" aria-label="Theme selection">
            <label class="theme-option">
              <input type="radio" name="theme" value="Black Friday Sale" checked />
              <span class="theme-label">ğŸ›’ Black Friday Sale</span>
            </label>
            <label class="theme-option">
              <input type="radio" name="theme" value="Disaster Relief Donation" />
              <span class="theme-label">ğŸ†˜ Disaster Relief Donation</span>
            </label>
            <label class="theme-option">
              <input type="radio" name="theme" value="Back to School" />
              <span class="theme-label">ğŸ“š Back to School</span>
            </label>
            <label class="theme-option">
              <input type="radio" name="theme" value="custom" id="customThemeRadio" />
              <span class="theme-label">âœï¸ Custom Theme</span>
            </label>
          </div>
          <input type="text" id="customThemeInput" class="custom-theme-input hidden" placeholder="Enter your custom theme..." maxlength="50" aria-label="Custom theme name" />
        </fieldset>
      </div>
      <div class="dialog-footer">
        <button id="startGame" class="btn btn-primary">Start Game</button>
      </div>
    </dialog>
    <dialog id="settingsMenu" class="settings-dialog">
      <div class="dialog-header">
        <h2>Settings</h2>
        <button class="dialog-close" commandfor="settingsMenu" command="close" aria-label="Close settings">âœ•</button>
      </div>
      <div class="dialog-body">
        <div class="settings-section">
          <label for="apiKeyInput">Google AI Studio API Key</label>
          <input id="apiKeyInput" type="password" placeholder="Paste API key" autocomplete="off" spellcheck="false" />
          <div class="settings-section-footer">
            <button id="clearApiKey" class="btn btn-danger">Clear</button>
            <button id="saveApiKey" class="btn btn-primary">Save</button>
          </div>
        </div>
        <div class="settings-divider"></div>
        <div class="settings-section">
          <label>Object Calibration</label>
          <p class="settings-description">Click an item below to calibrate it for touch recognition.</p>
          <div id="calibratedObjects" class="calibrated-objects-list"></div>
        </div>
      </div>
    </dialog>
    <dialog id="endGameMenu" class="settings-dialog end-game-dialog">
      <div class="dialog-header">
        <h2 id="endGameTitle">Game Over</h2>
      </div>
      <div class="dialog-body">
        <p id="endGameMessage">Your shift has ended!</p>
        <div class="end-game-stats">
          <div class="stat-item">
            <span class="stat-label">Final Score</span>
            <span id="finalScore" class="stat-value">$0</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">Items Processed</span>
            <span id="itemsProcessed" class="stat-value">0</span>
          </div>
        </div>
        <div id="highScoresSection" class="high-scores-section">
          <h3 class="high-scores-title">ğŸ† High Scores</h3>
          <div id="highScoresList" class="high-scores-list"></div>
          <div id="nameInputSection" class="name-input-section hidden">
            <p id="newHighScoreMessage" class="new-high-score-message">ğŸ‰ New High Score!</p>
            <div class="name-input-row">
              <input
                id="playerNameInput"
                type="text"
                placeholder="Enter your name"
                maxlength="20"
                autocomplete="off"
                aria-label="Enter your name for high score"
                aria-describedby="newHighScoreMessage"
              />
              <button id="saveHighScore" class="btn btn-primary">Save</button>
            </div>
          </div>
        </div>
      </div>
      <div class="dialog-footer">
        <button id="restartGame" class="btn btn-primary">Play Again</button>
      </div>
    </dialog>
    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
